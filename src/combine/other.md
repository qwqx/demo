- 计数器（固定窗口）：不能平滑限流
- 滑动窗口:相对平滑
- 漏斗：平滑，无法应对短时间的突发流量.
- 令牌桶：平滑，增加令牌产生速度可应对短时间的突发流量.

mysql死锁，

`SHOW ENGINE INNODB STATUS;`来查看死锁日志



排查死锁时，首先需要根据死锁日志分析循环等待的场景，然后根据当前各个事务执行的SQL分析出加锁类型以及顺序，逆向推断出如何形成循环等待，这样就能找到死锁产生的原因了



红黑树：

volatile:

